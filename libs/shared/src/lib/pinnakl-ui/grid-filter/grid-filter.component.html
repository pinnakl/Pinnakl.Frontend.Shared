<div [@filterVisibleChanged]="filterVisible">
  <div class="row pnkl-page-header prospecting-header-height">
    <div class="col-md-12 full-width-padding-fix">
      <div class="row">
        <div class="col-md-12"><h3 class="text-secondary">Filter</h3></div>
      </div>
    </div>
  </div>
  <form [formGroup]="form" (ngSubmit)="onSubmit()">
    <div class="row crm-prospecting-filter-body reporting-filter-height">
      <div class="col-md-12">
        <div class="row">
          <div class="col-md-12">
            <div class="row mt-3" *ngFor="let parameter of parameters">
              <div class="col-md-12">
                <pinnakl-input
                  [controlName]="parameter.name"
                  [form]="form"
                  [inputClass]="
                    parameter.type === 'date' ? 'datepicker-dark' : undefined
                  "
                  [label]="parameter.caption"
                  [type]="parameter.type"
                >
                </pinnakl-input>
              </div>
            </div>
          </div>
        </div>
        <div pnklCustomScroll darkMode="true" class="row grid-filter-columns" *ngIf="columns && columns.length > 0">
          <div class="col-md-12">
            <div class="row mt-3">
              <div class="col-md-4 check-holder check-holder-empty mb-4">
                <span *ngIf="!suppressSelection">
                  <input
                    type="checkbox"
                    id="selectAll"
                    formControlName="selectAll"
                  />
                  <label for="selectAll"></label>
                  <label class="ml-3">SELECT ALL</label>
                </span>
              </div>
            </div>
            <div
              class="row m-t-minus-2"
              *ngFor="let column of columns; let i = index"
            >
              <div
                *ngIf="!suppressSelection"
                class="col-md-1 check-holder check-holder-empty mt-4"
              >
                <input
                  type="checkbox"
                  [id]="'checkbox' + i"
                  [formControlName]="column.name + 'include'"
                />
                <label [for]="'checkbox' + i"></label>
              </div>
              <div class="col-md-8 flex-pull-right">
                <pinnakl-input
                  [controlName]="column.name"
                  [dropdownSource]="column.dropdownCollection"
                  (dropdownFetchData)="getDropdownValues(column)"
                  [dropdownOptions]="
                    column.type === 'text' ? { isAsync: true } : undefined
                  "
                  [form]="form"
                  [inputClass]="
                    column.type === 'date'
                      ? 'datepicker-dark popup-left-margin-adjust'
                      : column.type === 'text'
                      ? 'pnkl-select-dark'
                      : undefined
                  "
                  [label]="column.caption"
                  [labelClass]="
                    !suppressSelection
                      ? 'grid-filter-label text-uppercase'
                      : 'grid-filter-label text-uppercase left-minus-10'
                  "
                  [type]="column.type !== 'text' ? column.type : 'multiselect'"
                >
                </pinnakl-input>
              </div>
            </div>
          </div>
        </div>
        <div class="row mt-3">
          <div class="col-md-default-width">
            <button
              class="btn reset-background waves-effect text-uppercase"
              type="button"
              (click)="resetAllFilters()"
            >
              Reset
            </button>
          </div>
          <div class="col-md-default-width flex-pull-right">
            <button
              class="btn btn-success waves-effect text-uppercase"
              type="submit"
            >
              Apply
            </button>
          </div>
        </div>
      </div>
    </div>
  </form>
</div>
